<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Fund the Radical Pro-Abortion Agenda</title>

  <link rel="shortcut icon" type="image/x-icon" href="./favicon.png">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto&family=Roboto+Condensed&display=swap" rel="stylesheet">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <meta name="description" content="CALLING ALL PATRIOTS: Fund the Radical Pro-Abortion Agenda today!">
  <meta name="keywords" content="art, crypto, cryptocurrency, edition, abortion, radical, pro-life, pro-choice, trump, make america great again, maga, nft, eth, btc, ethereum, bitcoin, steve, pikelny, steve pikelny, steviep, planned parenthood">

  <meta name="twitter:image" content="https://steviep.xyz/rpaa/thumbnail.png">
  <meta name="twitter:image:alt" content="Radical Pro-Abortion Agenda">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:creator" content="@steviepxyz">
  <meta name="twitter:site" content="@steviepxyz">
  <meta property="twitter:description" content="CALLING ALL PATRIOTS: Fund the Radical Pro-Abortion Agenda today!">

  <meta name="og:image" property="og:image" content="https://steviep.xyz/rpaa/thumbnail.png">
  <meta name="og:image:alt" content="Radical Pro-Abortion Agenda">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://steviep.xyz/rpaa">
  <meta property="og:title" content="Radical Pro-Abortion Agenda">
  <meta property="og:site_name" content="Radical Pro-Abortion Agenda">
  <meta property="og:description" content="CALLING ALL PATRIOTS: Fund the Radical Pro-Abortion Agenda today!">

  <style type="text/css">
    * {
      padding: 0;
      margin: 0;
      font-family: 'Roboto Condensed', sans-serif;
    }

    main {
      /*flex-direction: column;*/
      display: flex;
      box-sizing: border-box;
      flex-flow: row-reverse;
      padding: 1vw;
      /*background: #eee;*/
      align-items: flex-start;

    }

/*    .flag {
      height: 100px;
      background-image: url(https://images.thdstatic.com/productImages/db0e6df1-f474-4b00-a8ed-d5da0506989c/svn/anley-house-flags-a-flag-us-sewn-64_600.jpg);
    }*/

    nav {
      margin-bottom: 2.7vw;
    }

    nav h1 {
      font-size: 6vw;
      color: #000;
      text-shadow: -2px 2px 0 #fff, -4px 4px 0 #f00, -6px 6px 0 #3030ce;
    }

    footer {
      margin-top: 2em;
    }

    .blink {
      animation: Blink 1.5s steps(2, start) infinite;
    }


    strong {
      font-weight: bold;
      padding-left: 1em;
      text-shadow: -0.5px 0.5px 0 #000, 0.5px 0.5px 0 #000, -0.5px -0.5px 0 #000, 0.5px -0.5px 0 #000;
    }

    em {
      padding: 0.15em 0.25em;
      background: #f00;
      color: #fff;
      font-style: normal;
      text-shadow: -0.5px 0.5px 0 #00f;
      /*-webkit-text-stroke: 0.1px #fff;*/

    }

    .info {
      margin: 1.7vw;
      padding: 1vw;
      margin-top: 3em;
      padding-top: 0;
      /*background: hsla(0, 0%, 100%, 0.95);*/
    }



    .donation-box {
      background: #fff;
      border: 4px solid #000;
      margin-top: 3em;
      margin-bottom: 1.5em;

      min-width: 390px;
      max-width: 94%;
    }
    .donation-box .header {
      border-bottom: 4px solid #000;
      background-color: #d8171e;
      color: #fff;
    }
    .donation-box .header,
    .donation-box .content {
      padding: 1em;
    }

    .content {
      display: flex;
      flex-direction: column;
      justify-content: center;
    }


    h1, h2, h3 {
      text-align: center;
    }

    .header h3 {
      font-family: monospace;
      font-size: 1.7em;
    }

    .highlight {
      background-color: #ff0;
      padding: 0.1em;
    }

    button {
      background-color: #d8171e;
      color: #fff;
      border: none;
      padding: 0.75em 2em;
      margin: 1em auto;
      margin-bottom: 0;
      border-radius: 2px;
      font-size: 1.3em;
      cursor: pointer;
    }
    button:active {
      opacity: 0.8;
    }

    #connectWallet, #mintToken {
      margin: 0;
    }

    .submenu {
      border: 2px solid;
      border-radius: 6px;
      margin: 1em 0;
      padding: 1em;
    }

    .donation-button {
      background: #691731;
      width: 4.3em;
      height: 2.7em;
      padding: 0;
    }

    .donation-input {
      height: 2.7em;
      margin: 1em auto;
      font-size: 1.3em;
      grid-column: span 2;
      text-align: center;
      color: #691731;
      width: 90%;
      padding: 0 1em;
      box-sizing: border-box;
    }

    .selected-button {
      background: #3030ce;
    }

    #formMessage {
      max-width: 300px;
      margin:  auto;
    }

    .button-grid {
      display: grid;
      grid-template-columns: 1fr 1fr 1fr;
    }

    .nft {
      padding: 2em;
      padding-bottom: 0;

    }

    .nft p {
      text-align: right;
      margin-top: 1em;
      color: #3030ce;
    }
    .nft img {
      display: block;
      width: 100%;
      /*border: 1px solid;*/
      box-shadow: -4px 4px 8px #000;
    }

    .center {
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .red {
      color: #f00;
    }

    .tada {
      animation: tada 1.8s linear infinite;
    }

    ul {
      list-style: none;
    }

    li {
      font-size: 12px;
      margin-top: 0.75em;
    }
    ul li:before {
      content: 'âœ“';
    }

    @media (max-width: 1100px) {
      .info {
        margin-top: 1em;
      }

      main {
        align-items: center;
        flex-flow: row;
        flex-direction: column;
      }

      nav h1 {
        font-size: 9.7vw;

      }
    }


    @media (max-width: 450px) {

      .donation-box {
        width: 390px;
        min-width: 0px;
      }
      .button-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
      }

      .donation-input {
        grid-column: span 1;
      }

      h2 {
        margin-top: 1em;
        font-size: 24px;
      }
    }

    @keyframes Blink {
      to {
        visibility: hidden;
      }
    }



    @keyframes PatriotColors {
      0%, 100% {
        color: #f00;
      }

      50% {
        color: #00f;
      }
    }

    @keyframes tada{
      0%, 20%, 85%{
        transform: scale3d(1,1,1) rotate(0deg)
      }
      25% {
        transform: scale3d(0.7,0.7,0.7) rotate(0deg)
      }
      35% {
        transform: scale3d(1,1,1) rotate(0deg)
      }

      40%,50%,60%,70% {
        transform: scale3d(1.2,1.2,1.2) rotate(-5deg)
      }

      45%,55%,65% {
        transform: scale3d(1.2,1.2,1.2) rotate(5deg)
      }

      75% {
        transform: scale3d(1.2,1.2,1.2) rotate(2deg)
      }
    }

    /*@keyframes tada{
        0%, 91%{
            -webkit-transform:scaleX(1) rotate(0deg);
            transform:scaleX(1) rotate(0deg)
        }
        10%,20%{
            -webkit-transform:scale3d(1,1,1) rotate(-3deg);
            transform:scale3d(1,1,1) rotate(-3deg)
        }
        30%,50%,70%,90%{
            -webkit-transform:scale3d(1.1,1.1,1.1) rotate(3deg);
            transform:scale3d(1.1,1.1,1.1) rotate(3deg)
        }
        40%,60%,80%{
            -webkit-transform:scale3d(1.1,1.1,1.1) rotate(-3deg);
            transform:scale3d(1.1,1.1,1.1) rotate(-3deg)
        }
    }*/

    .space {
      display: inline-block;
      width: 20px;
    }

    #modal {
      position: fixed;
      top: 0;
      left: 0;
      z-index: 100;
    }

    #modalBg {
      background: hsla(0, 0%, 0%, 0.25);
      width: 100vw;
      height: 100vh;
      position: absolute;
      z-index: 101;
      cursor: pointer;
    }

    .modalBoxContainer {
      width: 100vw;
      height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      position: absolute;
    }
    .modalBox {
      background: #fff;
      border: 1px solid;
      z-index: 102;
      margin: 2em;
      padding: 1em;
      box-shadow: 2px 5px 8px #000;
      max-width: 700px;
    }

    .x-container {
      display: flex;
      justify-content: right;
    }
    #x {
      cursor: pointer;
    }
  </style>

  <link rel="stylesheet" href="marquee.css">
</head>
<body>


    <div class="flag"></div>
  <main>
    <div class="info">
      <nav>
        <h1 class="blink">
          CALLING ALL PATRIOTS
        </h1>
      </nav>



      <h2>We're asking you, our <em>BEST PATRIOT</em>, to ignore The Fake News Media and collect this open edition ERC-1155 token to help fund the Radical Pro-Abortion Agenda. All proceeds donated directly to Planned Parenthood via <a href="https://app.endaoment.org/orgs/131644147" target="_blank">Endaoment</a>.</h2>
      <div class="nft" style="animation-delay: -0.5s;">
        <img src="./radical.svg">
        <p class="blink" style="animation-delay: -0.5s;">ERC 1155 <span class="space"></span> CC0 <span class="space"></span> 100% ON-CHAIN</p>
      </div>
    </div>


    <div class="donation-box">
      <div class="header"><h3>FUND THE RPAA</h3></div>
      <div class="content">
        <h3>MEMBER ID: 20991264 - 2022</h3>
        <h3>CONTRIBUTION STATUS: <span id="tokenBalance" class="red">0</span></h3>
        <h3>DEADLINE: <span class="highlight">IMMEDIATELY</span></h3>
        <div class="submenu">
          <h3>No. of Tokens</h3>
          <div class="button-grid">
            <button id="donation1" class="donation-button">1</button>
            <button id="donation2" class="donation-button">2</button>
            <button id="donation5" class="donation-button selected-button">5</button>
            <button id="donation10" class="donation-button tada">10</button>
            <button id="donation25" class="donation-button">25</button>
            <button id="donation50" class="donation-button">50</button>
            <button id="donation100" class="donation-button">100</button>
            <input id="donationCustom" class="donation-input" type="number" placeholder="Other">
          </div>
        </div>

        <div class="center" style="margin-bottom: 0.5em;">
          <h3>Donation Amount: <span id="price"></span> ETH</h3>
        </div>

        <div id="walletConnected" style="display: none;">
          <div class="center"><button id="mintToken">CONTRIBUTE NOW >></button></div>
        </div>

        <div id="walletNotConnected" style="display: none;">
          <div class="center"><button id="connectWallet">CONNECT WALLET >></button></div>
        </div>

        <div id="noWeb3Browser" style="display: none; color: red;">
          <h3>Please visit this page with a web3-enabled browser.</h3>
        </div>

        <p id="formMessage" class="red" style="text-align: center; padding-top: 0.25em;"></p>

      </div>
    </div>
  </main>

  <div class="marquee">
    <div
      class="marqueeInner marqueeForward"
    >
      <span>Rich Q. just collected <strong>10</strong></span>
      <span>Vince S. just collected <strong>69</strong></span>
      <span>Ray M. just collected <strong>5</strong></span>
      <span>Wendy P. just collected <strong>100</strong></span>
      <span>Joe S. just collected <strong>25</strong></span>
      <span>Sally Q. just collected <strong>50</strong></span>
      <span>Joe B. just collected <strong>5</strong></span>
      <span>Jessica R. just collected <strong>50</strong></span>
      <span>Susan F. just collected <strong>1</strong></span>
      <span>Steve P. just collected <strong>50</strong></span>
      <span>Emily M. just collected <strong>500</strong></span>
      <span>Sarah M. just collected <strong>10</strong></span>
      <span>Peter P. just collected <strong>100</strong></span>

    </div>
  </div>

  <div class="flag"></div>

  <footer>
    <h3 style="opacity: 0.5;">Contribution rules</h3>

    <ul style="padding: 20px; width: 400px; margin: auto;">
      <li>
        I am a U.S. citizen or lawfully admitted permanent resident (i.e., green card holder).
      </li>

      <li>
        This contribution is made from my own funds, and funds are not being provided to me by another person or entity for the purpose of making this contribution.
      </li>

      <li>
        I am making this contribution with my own personal wallet and not with a corporate or business wallet or a wallet issued to another person.
      </li>

      <li>
        I am at least eighteen years old. I am not, nor am I making this contribution on behalf of, a corporation, labor organization, national bank, foreign national without a green card, a federal contractor, or any other federally impermissible source.
      </li>


    </ul>
  </footer>


  <div id="modal" style="display: none;">
    <div class="modalBoxContainer">
      <div class="modalBox">
        <div class="x-container"><div id="x">X</div></div>
        <div style="padding: 1em;">
          <h1>Thank You!</h1>
          <h2>For funding the Radical Pro-Abortion Agenda!</h2>
          <div style="margin: 2em 0; display: flex; justify-content: center; align-items: center;">
            <a href="#" target="_blank"><span><strong>View your RPAA token</strong></a>
          </div>
        </div>
      </div>
    </div>
    <div id="modalBg"></div>

  </div>
</body>

<script src="./min.ethers.js"></script>
<script type="text/javascript">
  const $connectWallet = document.getElementById('connectWallet')
  const $walletNotConnected = document.getElementById('walletNotConnected')
  const $walletConnected = document.getElementById('walletConnected')
  const $noWeb3Browser = document.getElementById('noWeb3Browser')
  const $mintToken = document.getElementById('mintToken')
  const $tokenBalance = document.getElementById('tokenBalance')

  const $donation1 = document.getElementById('donation1')
  const $donation2 = document.getElementById('donation2')
  const $donation5 = document.getElementById('donation5')
  const $donation10 = document.getElementById('donation10')
  const $donation25 = document.getElementById('donation25')
  const $donation50 = document.getElementById('donation50')
  const $donation100 = document.getElementById('donation100')
  const $donationCustom = document.getElementById('donationCustom')
  const $price = document.getElementById('price')

  const $formMessage = document.getElementById('formMessage')

  const donationButtons = [$donation1, $donation2, $donation5, $donation10, $donation25, $donation50, $donation100]


  const env = 'local'


  const MINTER_CONTRACT = {
    local: '0x8bEe2037448F096900Fd9affc427d38aE6CC0350',
    goerli: '0xa96BC0a6aAaae3FD19F511364974c0Ab20AAbc47',
    mainnet: ''
  }[env]

  const TOKEN_CONTRACT = {
    local: '0x114e375B6FCC6d6fCb68c7A1d407E652C54F25FB',
    goerli: '0x6B45929204A58C4Da17941eeF05f6f2ed63eC519',
    mainnet: ''
  }[env]



;(async () => {
  const editionsABI = ['function balanceOf(address account, uint256 id) external view returns (uint256)']
  const minterABI = ['function mint(uint256 amount) external payable']



  let isEthBrowser

  if (window.ethereum) {
    console.log('web3')
    window.provider = new ethers.providers.Web3Provider(window.ethereum, 'any')
    window.signer = provider.getSigner()
    isEthBrowser = true

  } else {
    console.log('no Web3 detected')
    isEthBrowser = false

    $noWeb3Browser.style.display = 'initial'

    return
  }


  const EditionsContract = new ethers.Contract(TOKEN_CONTRACT, editionsABI, provider)
  const MinterContract = new ethers.Contract(MINTER_CONTRACT, minterABI, provider)

  const isConnected = async () => {
    if (!isEthBrowser) return false

    try {
      return await signer.getAddress()
    } catch (e) {
      return false
    }
  }

  $connectWallet.onclick = async () => {
    $connectWallet.innerHTML = 'Connecting...'
    try {
      const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' }, []);
      const address = await isConnected()
      onWalletConnected(address)

    } catch (e) {
      alert(`Error Connecting Wallet: ${e.message}`)
      debugger
      console.error(e)
    }
  }
  const connectedWallet = await isConnected()

  if (connectedWallet) {
    console.log(`Wallet connected: ${connectedWallet}`)
    onWalletConnected(connectedWallet)
  } else {
    $walletNotConnected.style.display = 'initial'

  }

  function onWalletConnected(wallet) {
    $walletNotConnected.style.display = 'none'
    $walletConnected.style.display = 'initial'
  }

  let currentBalance = 0
  async function updateTokenBalance() {
    const address = await isConnected()

    if (address) {
      try {
        currentBalance = Number(await EditionsContract.connect(signer).balanceOf(address, 1))
      } catch (e) {
        document.body.innerHTML = `Please switch to ${env}`
      }
    }
    $tokenBalance.innerHTML = currentBalance
  }
  updateTokenBalance()

  function setMessage(value) {
    $formMessage.innerHTML = value
  }

  function selectButton(amt) {
    donationButtons.forEach(b => b.classList.remove('selected-button'))
    const b = document.getElementById('donation'+amt)
    if (b) b.classList.add('selected-button')
    updateAmountSelected(amt)
  }

  let amountSelected
  function updateAmountSelected(amt) {
    amountSelected = amt
    $price.innerHTML = amt * 0.01
  }
  updateAmountSelected(5)

  $donation1.onclick = () => selectButton(1)
  $donation2.onclick = () => selectButton(2)
  $donation5.onclick = () => selectButton(5)
  $donation10.onclick = () => selectButton(10)
  $donation25.onclick = () => selectButton(25)
  $donation50.onclick = () => selectButton(50)
  $donation100.onclick = () => selectButton(100)

  $donationCustom.onfocus = () => selectButton(0)
  $donationCustom.onchange = (e) => updateAmountSelected(Number(e.target.value))


  async function mint () {
    setMessage('Pending...')
    $walletConnected.style.display = 'none'

    try {
      const originalBalance = currentBalance

      const tx = await MinterContract.connect(signer).mint(amountSelected, {
        value: ethers.utils.parseEther(String(amountSelected * 0.01))
      })

      setMessage(`
        TX Pending. <a href="https://etherscan.io/tx/${tx.hash}">View on etherscan</a>
      `)

      const interval = setInterval(async () => {
        await updateTokenBalance()
        if (originalBalance < currentBalance) {
          clearInterval(interval)
          setMessage(`
            Success!
          `)
          $walletConnected.style.display = 'initial'
          document.getElementById('modal').style.display = 'initial'
        }
      }, 1000)

    } catch (e) {
      $walletConnected.style.display = 'initial'
      console.log(e)

      const message = e.message.includes('Please enable Blind signing or Contract data in the Ethereum app Settings')
        ? e.message += ' -- If you are using a Ledger device, you may need to open "Settings" and enable "Debug data", as well as "Blind signing"'
        : e.message
      setMessage(message)
    }
  }

  $mintToken.onclick = mint

})()



  document.getElementById('modalBg').onclick = () => {
    document.getElementById('modal').style.display = 'none'
  }

  document.getElementById('x').onclick = () => {
    document.getElementById('modal').style.display = 'none'
  }

</script>
</html>